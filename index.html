<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„ä¸´æ—¶é‚®ç®±</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
    h1 { text-align: center; }
    #email-list { max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
    .mail { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .mail:last-child { border: none; }
    .from { font-weight: bold; }
    .subject { color: #333; }
    .date { color: gray; font-size: 12px; }
  </style>
</head>
<body>
  <h1>ğŸ“« æˆ‘çš„ä¸´æ—¶é‚®ç®±</h1>
  <div id="email-list">åŠ è½½ä¸­...</div>

  <script>
    function loadInbox() {
      fetch('inbox.json?t=' + Date.now()) // åŠ æ—¶é—´æˆ³é˜²ç¼“å­˜
        .then(res => res.json())
        .then(data => {
          const list = document.getElementById('email-list');
          list.innerHTML = '';

          // è·³è¿‡ç³»ç»Ÿæµ‹è¯•ï¼Œå±•ç¤ºç¬¬ä¸€å°çœŸå®é‚®ä»¶
          const realEmail = data.find(mail => mail.from !== 'ç³»ç»Ÿæµ‹è¯•');
          if (realEmail) {
            const div = document.createElement('div');
            div.className = 'mail';
            div.innerHTML = `
              <div class="from">ğŸ“© æ¥è‡ªï¼š${realEmail.from}</div>
              <div class="subject">ä¸»é¢˜ï¼š${realEmail.subject}</div>
              <div class="date">æ—¶é—´ï¼š${realEmail.date}</div>
            `;
            list.appendChild(div);
          } else {
            list.innerHTML = 'ğŸ“­ å½“å‰æš‚æ— çœŸå®é‚®ä»¶';
          }
        })
        .catch(err => {
          document.getElementById('email-list').innerText = 'åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
          console.error(err);
        });
    }

    loadInbox();
    setInterval(loadInbox, 10000); // æ¯ 10 ç§’åˆ·æ–°
  </script>
</body>
</html>
