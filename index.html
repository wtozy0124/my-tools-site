<script>
  function loadInbox() {
    fetch('inbox.json?t=' + Date.now()) // 防止缓存
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('email-list');
        list.innerHTML = '';

        // 跳过系统测试行，取第一封真实邮件
        const realEmail = data.find(mail => mail.from !== '系统测试');
        if (realEmail) {
          const div = document.createElement('div');
          div.className = 'mail';
          div.innerHTML = `
            <div class="from">📩 来自：${realEmail.from}</div>
            <div class="subject">主题：${realEmail.subject}</div>
            <div class="date">时间：${realEmail.date}</div>
          `;
          list.appendChild(div);
        } else {
          list.innerHTML = '📭 当前暂无真实邮件';
        }
      })
      .catch(err => {
        document.getElementById('email-list').innerText = '加载失败，请稍后重试';
        console.error(err);
      });
  }

  loadInbox();
  setInterval(loadInbox, 10000); // 每 10 秒刷新
</script>
